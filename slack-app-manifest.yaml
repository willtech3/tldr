display_information:
  name: TLDR Bot
  description: AI-powered message summarization for Slack
  background_color: "#2C2D30"
  long_description: TLDR Bot uses ChatGPT to generate intelligent summaries of your Slack conversations. Get quick TLDR summaries of unread messages, long threads, or specific message ranges. Features include customizable prompts, Canvas integration for persistent summaries, message count control, and flexible output destinations. Perfect for catching up on busy channels, understanding lengthy discussions, or creating meeting notes.

features:
  app_home:
    home_tab_enabled: true
    messages_tab_enabled: true
    messages_tab_read_only_enabled: false
  bot_user:
    display_name: TLDR
    always_online: true
  shortcuts:
    - name: Summarize Channel
      type: global
      callback_id: summarize_channel
      description: Generate a summary of the current channel's unread messages
    - name: Summarize Thread
      type: message
      callback_id: summarize_thread
      description: Summarize this message thread
  slash_commands:
    - command: /tldr
      # Replace with your actual API Gateway URL from CDK output
      # Format: https://<api-id>.execute-api.<region>.amazonaws.com/prod/commands
      # Get it by running: aws cloudformation describe-stacks --stack-name TldrStack --query "Stacks[0].Outputs[?OutputKey=='ApiGatewayUrl'].OutputValue" --output text
      url: "https://YOUR-API-ID.execute-api.YOUR-REGION.amazonaws.com/prod/slack/commands"
      description: Generate a summary of channel messages
      usage_hint: "[count=N] [channel=#channel] [custom='prompt'] [--visible]"
      should_escape: false

oauth_config:
  scopes:
    bot:
      - channels:history
      - channels:read
      - chat:write
      - chat:write.public
      - commands
      - groups:history
      - groups:read
      - im:history
      - im:read
      - im:write
      - mpim:history
      - mpim:read
      - users:read
      - files:read
      # Canvas permissions (CRITICAL for Canvas API)
      - canvases:read
      - canvases:write

settings:
  event_subscriptions:
    # Replace with your actual API Gateway URL from CDK output
    # Format: https://<api-id>.execute-api.<region>.amazonaws.com/prod/slack/events
    request_url: "https://YOUR-API-ID.execute-api.YOUR-REGION.amazonaws.com/prod/slack/events"
    bot_events:
      - app_home_opened
  interactivity:
    is_enabled: true
    # Replace with your actual API Gateway URL from CDK output
    # Format: https://<api-id>.execute-api.<region>.amazonaws.com/prod/slack/interactive
    request_url: "https://YOUR-API-ID.execute-api.YOUR-REGION.amazonaws.com/prod/slack/interactive"
  org_deploy_enabled: true
  socket_mode_enabled: false
  token_rotation_enabled: false